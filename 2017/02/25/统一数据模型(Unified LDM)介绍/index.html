<!DOCTYPE html>
<html>
    <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- Title -->
    
    <title>
        统一数据模型(Unified LDM)介绍 | instore.top | Learn More, Share More.
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.ico">
    <link rel="icon" sizes="192x192" href="/img/favicon.ico">
    <link rel="apple-touch-icon" href="/img/favicon.ico">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Liang3p">
    <meta name="description" content="Learn More, Share More.--We are not exactly sure what is in store for us, but we know that sharing ideas keeps us moving on. I wish everyone have the big surprise InStore.">
    <meta name="keywords" content="null">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="instore.top | Learn More, Share More.">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://instore.top">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="统一数据模型(Unified LDM)介绍 | instore.top | Learn More, Share More.">
    <meta property="og:description" content="Learn More, Share More.--We are not exactly sure what is in store for us, but we know that sharing ideas keeps us moving on. I wish everyone have the big surprise InStore.">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #00838F
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important
    }
    
	/* Sidebar User Drop Down Menu Text Color */
	#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #0097A7 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #0097A7 !important
    }
    
    .toTop{
        background: #757575 !important
    }
		
	.material-layout .material-post>.material-nav,
	.material-layout .material-index>.material-nav,
	.material-nav a{
		color: #757575;
	}
		
	#scheme-Paradox .MD-burger-layer {
		background-color: #757575;
	}

	#scheme-Paradox #post-toc-trigger-btn{
		color: #757575;
	}
	
	.post-toc a:hover{
		color: #00838F;
		text-decoration: underline;
	}
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-color: #F5F5F5
        }
		
		/* blog_info bottom background */
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>

	<script src="/js/jquery.min.js"></script>
	
	<link rel="stylesheet" href="/css/highlight/solarized-white.css">
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
</head>
	
	

    <body id="scheme-Paradox">

		
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
                <!-- Hamburger Button -->
                <button class="MD-burger-icon sidebar-toggle">
                    <span class="MD-burger-layer"></span>
                </button>
				
				
                <!-- Post TOC -->

    
	<!-- Back Button -->
<!--
	<div class="material-back" id="backhome-div" tabindex="0">
		<a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#" onclick="window.history.back();return false;" target="_self" role="button" data-upgraded=",MaterialButton,MaterialRipple">
			<i class="material-icons" role="presentation">arrow_back</i>
			<span class="mdl-button__ripple-container">
				<span class="mdl-ripple"></span>
			</span>
		</a>
	</div>			
-->
	<!-- Left aligned menu below button -->
	<button id="post-toc-trigger-btn"
			class="mdl-button mdl-js-button mdl-button--icon">
	  <i class="material-icons">format_list_numbered</i>
	</button>

	<ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
		for="post-toc-trigger-btn">
			
			<ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据模型-Data-model-的概念"><span class="post-toc-number">1.</span> <span class="post-toc-text">数据模型(Data model)的概念</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据模型的三要素"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">数据模型的三要素</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#统一逻辑数据模型"><span class="post-toc-number">2.</span> <span class="post-toc-text">统一逻辑数据模型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主要目标"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">主要目标</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据建模的阶段"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">数据建模的阶段</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#逻辑数据模型-LDM"><span class="post-toc-number">3.</span> <span class="post-toc-text">逻辑数据模型(LDM)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#逻辑模型的重要性"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">逻辑模型的重要性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#逻辑模型结构"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">逻辑模型结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#现有的LDM产品"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">现有的LDM产品</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Unified-LDM-的构建单元——模块"><span class="post-toc-number">4.</span> <span class="post-toc-text">Unified LDM 的构建单元——模块</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#模型设计流程"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">模型设计流程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#信息分析-Infoemation-Discovery"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">信息分析(Infoemation Discovery)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Step1-收集源系统资料"><span class="post-toc-number">4.1.1.1.</span> <span class="post-toc-text">Step1:收集源系统资料</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Step2-系统分析"><span class="post-toc-number">4.1.1.2.</span> <span class="post-toc-text">Step2:系统分析</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Step3-数据结构整理"><span class="post-toc-number">4.1.1.3.</span> <span class="post-toc-text">Step3:数据结构整理</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Step4-样本数据查看"><span class="post-toc-number">4.1.1.4.</span> <span class="post-toc-text">Step4:样本数据查看</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Step5-数据分类整理"><span class="post-toc-number">4.1.1.5.</span> <span class="post-toc-text">Step5:数据分类整理</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#小结"><span class="post-toc-number">4.1.1.6.</span> <span class="post-toc-text">小结</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#物理数据模型-PDM"><span class="post-toc-number">5.</span> <span class="post-toc-text">物理数据模型(PDM)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PDM与LDM的比较"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">PDM与LDM的比较</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PDM’s-key-points"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">PDM’s key points</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#索引"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">索引</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#表和字段命名"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">表和字段命名</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#字段属性"><span class="post-toc-number">5.2.3.</span> <span class="post-toc-text">字段属性</span></a></li></ol></li></ol></li></ol>
		
<!--			<li class="mdl-menu__item">Some Action</li>-->
	</ul>



<!-- Layouts -->


<!-- header_home -->

<!-- header_home -->
<div class="material-index mdl-grid" style="margin-top: -145px;padding-left: 10px;padding-bottom: 80px;">
    <a href="/">
        <img src="/img/instore.top.png" alt="logo" />
    </a>
</div>


    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	<!-- Paradox Post Header -->
	
		
			<!-- Random Thumbnail -->
			<div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
				<script>
    
    var randomNum;
    randomNum = Math.floor(Math.random() * 5 + 1);
    
    $(".post_thumbnail-random").css('background-image', 'url(' + '/img/random/' + randomNum + '.png' + ')');
    
</script>

		
	
        <p class="article-headline-p">
            统一数据模型(Unified LDM)介绍
        </p>
    </div>

	


				
					<!-- Paradox Post Info -->
					<div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
    
    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Liang3p</strong>
        <span>2月 25, 2017</span>
    </div>
    
    <div class="section-spacer"></div>
	
    <!-- Favorite -->
<!--
    <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
        <i class="material-icons" role="presentation">favorite</i>
        <span class="visuallyhidden">favorites</span>
    </button>
-->
    
    <!-- Tags (bookmark) -->
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/数据仓库/">数据仓库</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/数据建模/">数据建模</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/行业应用/">行业应用</a>
    </ul>
    
    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    
    
    
    
    <!-- Share Twitter -->
    <a class="post_share-link" href="https://twitter.com/intent/tweet?text=统一数据模型(Unified LDM)介绍&url=http://instore.top//2017/02/25/统一数据模型(Unified LDM)介绍/index.html&via=Liang3p" target="_blank">
        <li class="mdl-menu__item">
            分享到 Twitter
        </li>
    </a>
    
    <!-- Share Google+ -->
    <a class="post_share-link" href="https://plus.google.com/share?url=http://instore.top//2017/02/25/统一数据模型(Unified LDM)介绍/index.html" target="_blank">
        <li class="mdl-menu__item">
            分享到 Google+
        </li>
    </a>
    
    <!-- Share Weibo -->
    <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=统一数据模型(Unified LDM)介绍&url=http://instore.top//2017/02/25/统一数据模型(Unified LDM)介绍/index.html&pic=&searchPic=false&style=simple" target="_blank">
        <li class="mdl-menu__item">
            分享到微博
        </li>
    </a>
</ul>
</div>
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
		<p>本文介绍了数据模型的基本概念、结构、特点、以及逻辑数据模型的设计流程，最后一节简单介绍了物理数据模型，并将逻辑数据模型与物理数据模型做了比较。</p>
<h2 id="数据模型-Data-model-的概念"><a href="#数据模型-Data-model-的概念" class="headerlink" title="数据模型(Data model)的概念"></a>数据模型(Data model)的概念</h2><p>模型是对现实世界的抽象。在数据库技术中，表示实体类型及实体类型间联系的模型称为“数据模型”。数据模型是数据库管理的教学形式框架，是用来描述一组数据的概念和定义。<br><strong>模型</strong>——现实世界的抽象<br><strong>数据模型</strong>——现实世界数据特征的抽象，模型设计有利于我们更好地理解现实世界。</p>
<h3 id="数据模型的三要素"><a href="#数据模型的三要素" class="headerlink" title="数据模型的三要素"></a>数据模型的三要素</h3><p>数据模型是严格定义的一组概念的集合,精确地描述了系统的静态特征（数据结构）、动态特征（数据操作）和完整性约束条件，这就是数据模型的三要素。</p>
<ul>
<li><strong>数据结构</strong><br>所研究的对象类型的集合。指对象和对象间联系的表达和实现<br>数据本身：类型、 内容、性质<br>数据之间的联系： 数据之间是如何相互关联的</li>
<li><strong>数据操作</strong><br>对数据库中对象的实例允许执行的操作集合，主要指检索和更新两类操作<br>数据模型必须定义这些操作的确切含义、操作符号、操作规则以及实现操作的语言</li>
<li><strong>数据完整性约束</strong><br>一组完整性规则的集合<br>规定数据库状态及状态变化所应满足的条件<br>保证数据的正确性、有效性和相容性</li>
</ul>
<h2 id="统一逻辑数据模型"><a href="#统一逻辑数据模型" class="headerlink" title="统一逻辑数据模型"></a>统一逻辑数据模型</h2><p><strong>统一逻辑数据模型</strong><br>统一逻辑数据模型框架旨在实现理论上整体的逻辑数据模型，在该整体逻辑数据模型里面一个业务概念仅有一个，且与行业无关，可以跨行业支持相关业务内容。<br>之所以说理论上主要考虑到实际诸如模型大小的诸多约束，实际中允许内容被拆分成多个部分，通过统一打包实现被多个行业共享。</p>
<h3 id="主要目标"><a href="#主要目标" class="headerlink" title="主要目标"></a>主要目标</h3><p>提供通用、可共享的模型内容<br>强化组合LDM构建新行业LDM模型<br>对已有行业LDM模型进行增强、补充</p>
<h3 id="数据建模的阶段"><a href="#数据建模的阶段" class="headerlink" title="数据建模的阶段"></a>数据建模的阶段</h3><ul>
<li><p><strong>概念数据模型</strong><br>描述世界的概念化结构<br>设计的初始阶段<br>摆脱具体技术问题， 分析数据及数据之间的联系等<br>与具体的DBMS无关</p>
</li>
<li><p><strong>逻辑数据模型</strong><br>用户从数据库所看到的数据模型<br>是具体的DBMS所支持的数据模型<br>此模型既要面向用户，又要面向系统</p>
</li>
<li><p><strong>物理数据模型</strong><br>描述数据在储存介质上的组织结构的数据模型<br>它不但与具体的 DBMS有关，而且还与操作系统和硬件有关</p>
</li>
</ul>
<h2 id="逻辑数据模型-LDM"><a href="#逻辑数据模型-LDM" class="headerlink" title="逻辑数据模型(LDM)"></a>逻辑数据模型(LDM)</h2><p>逻辑数据模型（Logical Data Model）是一种图形的展现方式，采用面向主题的方法、按照3NF的规则有效组织来源多样的各种业务数据，同时集成了保险、银行及投资等行业复杂的业务规则，支持大量的分析应用。它使用统一的逻辑语言描述业务，是数据管理的分析工具和交流的有力手段；同时还能够很好地保证数据的一致性，是实现业务智能（Business Intelligence）的重要基础。<br>企业级数据仓库逻辑数据模型应该是中性的，能够满足各种不同的分析型应用的要求而设计，如客户关系管理、成本管理、风险管理等应用。</p>
<p>如何构建LDM</p>
<ul>
<li>通过实体和关系反映一个业务过程</li>
<li>要素：实体、属性、关系</li>
<li>LDM是模型、ETL、业务人员沟通的桥梁</li>
</ul>
<p>TD的逻辑数据模型采用实体-关系模型（ER model）<br>设计工具—— ERwin(Teradata使用)\PowerDesign</p>
<h3 id="逻辑模型的重要性"><a href="#逻辑模型的重要性" class="headerlink" title="逻辑模型的重要性"></a>逻辑模型的重要性</h3><ul>
<li>稳定性</li>
<li>易用性</li>
<li>访问效率</li>
<li>存储容量</li>
<li>维护成本</li>
</ul>
<h3 id="逻辑模型结构"><a href="#逻辑模型结构" class="headerlink" title="逻辑模型结构"></a>逻辑模型结构</h3><ul>
<li><p><strong>主要主题域</strong><br>将相关的主题域进行组合，从而形成更少的高阶分组<br>主题域至少包含在一个主要主题域里面<br>每个行业的LDM不尽相同,不同行业逻辑数据模型对比如下：<br><strong>金融行业十大主题</strong>：</p>
<blockquote>
<ul>
<li><strong>事件</strong>：会导致同客户达成的合同的金融或非金融事件</li>
<li><strong>当事人</strong>：单个人或一组人</li>
<li><strong>位置</strong>：地理区域，物理的或电子邮件的地址</li>
<li><strong>账务</strong>：企业内部的会计账目</li>
<li><strong>当事人资产</strong>：当事人所有的具有价值且能够获得收益的事物</li>
<li><strong>营销活动</strong>：为了获取、挽留客户或提高用户的使用率而采取的战略、计划或促销活动</li>
<li><strong>协议</strong>：在客户和金融机构之间达成的关于特定产品的协议</li>
<li><strong>内部组织</strong>：金融机构或保险公司的内部的业务单元</li>
<li><strong>产品</strong>：一种可以在市场上交易的产品或服务，包括条款和条件</li>
<li><strong>渠道</strong>：客户和金融机构或保险公司进行接触的途径</li>
</ul>
</blockquote>
<p><strong>电信行业主题域</strong>：</p>
<blockquote>
<ul>
<li><strong>CRM</strong>: 客户关系管理分析</li>
<li><strong>VOC</strong>: 语音业务分析</li>
<li><strong>ADD</strong>: 新业务与数据业务分析</li>
<li><strong>REV</strong>: 收入分析</li>
<li><strong>MKT</strong>: 市场竞争分析</li>
<li><strong>CAM</strong>: 营销管理分析</li>
<li><strong>SRV</strong>: 服务质量分析</li>
<li><strong>BIG</strong>: 大客户分析</li>
<li><strong>NMS</strong>: 网管分析</li>
<li><strong>STL</strong>: 结算分析</li>
<li><strong>FIN</strong>: 财务分析</li>
</ul>
</blockquote>
<p><strong>中国移动经营分析系统主题域</strong>：</p>
<blockquote>
<ul>
<li><strong>客户主题</strong>：涉及个人客户、集团客户、大客户等服务对象，并记录离网客户、黑名单以及客 户群等客户信息；</li>
<li><strong>服务主题</strong>： 服务主题通过对中国移动实际业务的抽象表达，概括移动的主要业务和产品，描 述中国移动向客户提供的产品以及客户对产品的选择定制。</li>
<li><strong>资源主题</strong>： 资源是移动公司拥有的为客户提供服务的所有载体和团体，包括服务资源、网络 资源、人力资源和外部资源；</li>
<li><strong>服务使用</strong>主题：服务使用主题是描述服务使用清单以及清单与用户和用户群的关系，并按照 一定的原则对清单进行分类。</li>
<li><strong>帐务主题</strong>：帐务主题主要反映客户与帐户之间的关系，包括费用发生、费用交付等。</li>
<li><strong>结算主题</strong>：结算主题重点描述了结算帐单、结算清单、参与结算的合作服务方，及其之间的 关系；同时按一定的原则对结算清单做了分类归并。结算类型、结算规则、结算费用项目是 本主题域着重描述的结算帐单属性。</li>
<li><strong>客服主题</strong>：客户服务是中国移动与客户的接触平台，客服主题抽象并整合中国移动客户服务 过程中产生的各类交互事件，并对各种交互渠道和接触方式进行了整合。</li>
<li><strong>营销主题</strong>：营销指移动公司针对特定的市场环境及客户群体所进行的市场宣传、促销等计划 与活动</li>
</ul>
</blockquote>
</li>
</ul>
<ul>
<li><p><strong>概念</strong><br>真实世界中事物的描述,有什么样的对象，以及它们之间的关系。<br>基于主题区域的扩展，描述每个主题的主要实体以及关系。</p>
</li>
<li><p><strong>细节</strong><br>实体代表了一个人、地方、事物、概念或事件 (PARTY, CITY, DEMOGRAPHIC VALUE, etc.)<br>属性描述了实体的数据事实或特征<br>关系：one-to-one (1:1), one to-many (1:M), or many-to-many (M:M) relationship</p>
</li>
<li><p><strong>主题域</strong><br>相关对象(实体、属性和关系)的一个组合以表达一个特定业务功能或概念<br>实体可以属于一个或多个主题域<br>主题域可以由一个或多个E-R图块构成，以表达该主题域主要目标的不同方面</p>
</li>
</ul>
<h3 id="现有的LDM产品"><a href="#现有的LDM产品" class="headerlink" title="现有的LDM产品"></a>现有的LDM产品</h3><p><strong>通信行业</strong> - 电信、电讯和卫星<br>Teradata Communications Logical Data Model (CLDM)<br>Telecom Data Warehouse Model(IBM TDWM)</p>
<p><strong>金融服务行业</strong> - 银行、保险和资本市场<br>Teradata Financial Services Logical Data Model (FS-LDM)<br>Banking Data Warehouse Model (IBM BDWM)</p>
<p><strong>医疗保健行业</strong> - 付款人、供应商和药店收益管理<br>Teradata Healthcare Logical Data Model (HCLDM)</p>
<p><strong>媒体和娱乐行业</strong> - 工作室、数字媒体和电子商务<br>Teradata Media and Entertainment Logical Data Model (M&amp;E LDM)</p>
<p><strong>零售业</strong> - 食品与药品、日用商品和食品服务<br>Teradata Retail Logical Data Model (RLDM)</p>
<p><strong>旅游业</strong> – 航空、酒店餐饮和博彩<br>Teradata Travel and Hospitality Logical Data Model (T&amp;H LDM)</p>
<p><strong>运输与物流行业</strong> - 物流、快递和运输服务<br>Teradata Transportation Logical Data Model (TLDM)</p>
<p><strong>制造业</strong> - 自动化/工业、高科技和包装消费品<br>Teradata Manufacturing Logical Data Model(MLDM)</p>
<h2 id="Unified-LDM-的构建单元——模块"><a href="#Unified-LDM-的构建单元——模块" class="headerlink" title="Unified LDM 的构建单元——模块"></a>Unified LDM 的构建单元——模块</h2><p>Modules 是共享内容的最小单元，构建用于表达公共业务领域或功能，它是：</p>
<ul>
<li>一个Erwin文件</li>
<li>包含一个或多个业务内容的主题域</li>
<li>特殊实体需要链接到一个已经存在的行业LDM中</li>
<li>模块不必要包含所探索内容的100%深度和宽度，而仅需要包含更通用、可共享的内容，个性化部分可以再特定行业模型的拓展中进行。</li>
</ul>
<blockquote>
<p><strong>Foundational Modules</strong></p>
<ul>
<li>基础的共享的元素</li>
<li>如：当事人、渠道、地址</li>
</ul>
<p><strong>Functional Modules</strong></p>
<ul>
<li>一些行业LDM公共模块</li>
<li>如：人力资源管理功能模块</li>
</ul>
</blockquote>
<h3 id="模型设计流程"><a href="#模型设计流程" class="headerlink" title="模型设计流程"></a>模型设计流程</h3><p>信息分析(ID)<br>逻辑模型设计(LDM)<br>物理模型设计(PDM)</p>
<h4 id="信息分析-Infoemation-Discovery"><a href="#信息分析-Infoemation-Discovery" class="headerlink" title="信息分析(Infoemation Discovery)"></a>信息分析(Infoemation Discovery)</h4><p><strong>目标</strong></p>
<ul>
<li>清晰了解源系统业务：<br>支持的业务（种类与定义）<br>业务规则（特点与关系）</li>
<li>理清源系统数据<br>数据结构<br>数据的业务含义<br>数据关系和数据流向</li>
<li>源业务系统之间的关系<br>数据接口<br>加工规则<br>数据一致性规则</li>
<li>了解数据概况<br>数据量<br>加载方式、时间<br>数据格式<br>数据质量</li>
<li>了解应用需求<br>了解基于该系统数据的应用情况及对新应用需求的满足情况</li>
</ul>
<h5 id="Step1-收集源系统资料"><a href="#Step1-收集源系统资料" class="headerlink" title="Step1:收集源系统资料"></a>Step1:收集源系统资料</h5><p><strong>重点事项</strong></p>
<blockquote>
<p>源系统总体设计<br>数据字典：重要的数据项、数据结构、文件结构、数据流程图、数据存储等数据库设计资料（防止文档设计与实施结果不一致无法获知该不一致情况）<br>源系统的详细设计文档<br>业务操作手册<br>生产库标DDL、表清单及样本数据<br>源系统的E-R图</p>
</blockquote>
<p><strong>参与人</strong><br>模型设计人员<br>系统技术人员<br>源系统业务人员</p>
<p><strong>输入</strong><br>源系统资料需求清单</p>
<p><strong>输出</strong><br>源系统资料，比如系统总体设计说明书、数据字典等</p>
<h5 id="Step2-系统分析"><a href="#Step2-系统分析" class="headerlink" title="Step2:系统分析"></a>Step2:系统分析</h5><p><strong>重点事项</strong></p>
<blockquote>
<p>系统平台情况：硬件平台、操作系统、数据库、运行情况、实施情况<br>系统业务情况：支撑的业务与业务流程<br>系统数据情况：表清单及说明、数据格式、数据量与记录数、数据质量概况<br>与其他系统的关系：业务、数据流<br>系统应用情况：基于该业务系统的应用开发情况</p>
</blockquote>
<p><strong>参与人</strong><br>模型设计人员<br>系统技术人员<br>源系统人员</p>
<p><strong>输入</strong><br>源系统资料<br>源系统数据接口规范</p>
<p><strong>输出</strong><br>源系统数据接口规范<br>入仓表清单</p>
<h5 id="Step3-数据结构整理"><a href="#Step3-数据结构整理" class="headerlink" title="Step3:数据结构整理"></a>Step3:数据结构整理</h5><p>重点事项</p>
<blockquote>
<p>整理源系统的数据结构<br>Minerva可以实现从源系统的库中直接抽取表结构</p>
</blockquote>
<p><strong>参与人</strong><br>模型设计人员<br>源系统人员</p>
<p><strong>输入</strong><br>源系统资料</p>
<p><strong>输出</strong><br>源系统数据结构整理</p>
<h5 id="Step4-样本数据查看"><a href="#Step4-样本数据查看" class="headerlink" title="Step4:样本数据查看"></a>Step4:样本数据查看</h5><p>重点事项</p>
<blockquote>
<p>验证业务规则：针对数据结构整理中的业务规则进行补充和完善<br>表间的数据关系验证<br>每个字段分析：业务含义、取值、关联关系、关系完整性、数据质量概况</p>
</blockquote>
<p><strong>参与人</strong><br>模型设计人员</p>
<p><strong>输入</strong><br>源系统数据结构<br>测试数据</p>
<p><strong>输出</strong><br>测试结果<br>数据问题跟踪表</p>
<h5 id="Step5-数据分类整理"><a href="#Step5-数据分类整理" class="headerlink" title="Step5:数据分类整理"></a>Step5:数据分类整理</h5><p>重点事项</p>
<blockquote>
<p>数据表及字段取舍建议<br>数据表按照LDM主题归类<br>LDM字段中文名</p>
</blockquote>
<p><strong>参与人</strong><br>模型设计人员</p>
<p><strong>输入</strong><br>调研结果<br>样本数据分析结果</p>
<p><strong>输出</strong><br>细化的简要数据映射</p>
<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a><strong><em>小结</em></strong></h5><p>输入（Input）<br>源系统的总体设计<br>源系统的数据字典<br>源系统的详细设计文档<br>业务操作手册<br>生产表DDL、表清单及样本数据<br>源系统的E-R图</p>
<p>处理（Process）<br>系统分析<br>数据结构整理<br>样本数据查看数据分析<br>数值分类分析整理<br>生产数据深入分析</p>
<p>输出（Output）<br>《源业务系统概要分析》<br>《源业务系统数据结构及ER图整理》<br>《源业务系统代码整理》<br>《源系统数据表概况》<br>《源系统简要数据映射及ER》</p>
<p><strong>成功关键因素</strong><br>正确的信息分析方法论的指导<br>有效的问题反馈机制和相应的人员配合：明确源系统的支持方式，如安排调研交流会议，确定源系统调研支持的联络人及联系方式，明确问题的反馈时间与途径、形式</p>
<h2 id="物理数据模型-PDM"><a href="#物理数据模型-PDM" class="headerlink" title="物理数据模型(PDM)"></a>物理数据模型(PDM)</h2><h3 id="PDM与LDM的比较"><a href="#PDM与LDM的比较" class="headerlink" title="PDM与LDM的比较"></a>PDM与LDM的比较</h3><ul>
<li><p><strong>PDM与LDM基本一致</strong><br>主题一致，主体结构\主要实体一致，主要字段相同<br>继承LDM灵活性好，易于扩展等优点<br>有利于业务人员和最终用户对PDM的理解<br>是PDM成功实施的基础性保障</p>
</li>
<li><p><strong>PDM不等同于LDM</strong><br>PDM更着眼于实施、操作 和性能，更贴近数据<br>PDM需要经常性的维护<br>适应新版本DB特性和系统数据容量和系统资源情况变化<br>根据数据处理和工作负载 进行调整和维护</p>
</li>
<li><p><strong>PDM更多考虑系统物理特性</strong><br>评估数据容量<br>数据的加载的效率和时间窗口<br>数据的备份和保留策略<br>数据质量、业务和数据规则</p>
</li>
<li><p><strong>更多考虑数据处理性能</strong><br>增加物理操作字段<br>非范式化实体和冗余字段<br>设计中间处理和汇总表<br>表的合并或拆分<br>历史表和当前</p>
</li>
</ul>
<h3 id="PDM’s-key-points"><a href="#PDM’s-key-points" class="headerlink" title="PDM’s key points"></a>PDM’s key points</h3><h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><p>PI,PPI表的使用。分区字段一般选择时间(方便数据仓库存储大量的历史数据),主索引的选取需合适，避免数据倾斜，必要时可将高频JION字段加入PI以优化关联性能</p>
<h4 id="表和字段命名"><a href="#表和字段命名" class="headerlink" title="表和字段命名"></a>表和字段命名</h4><p>注意命名规范和命名统一。对于同一业务实体，在不同的物理表中表述必须一致，避免使用别名或者相似的名字，字段类型也需要一致，比如设置Cust_Id VARCHAR(20)与Cust_Id VARCHAR(10)不一致，导致数据在存储中数据的分布不一致，关联的性能就会受到影响，因为字段长度不同，Hash也就不同，关联的时候系统需要进行重分布，影响了数据库性能。</p>
<h4 id="字段属性"><a href="#字段属性" class="headerlink" title="字段属性"></a>字段属性</h4><ul>
<li>设置DEFAULT VALUE<br>不建议在表定义时设置默认值<br>在源系统数据缺少或者业务含义明确的情况下，通过ETL过程处理成默认值<br>屏蔽空值，提高记录的可用性，同时也使MVC发挥出更好的效用。</li>
<li>定义NOT NULL<br>增强对源数据完整性的侦测：如果使用LEFT JOIN出现关联不到的情况，则数据无法插入PDM，且系统报错提示；<br>屏蔽查询和访问时子查询和关联时的未知性：若子查询关联字段存在NULL值，则不返回任何结果</li>
<li>定义CASESPECIFIC<br>字段大小写敏感；<br>防止在对中文字符进行过滤时不出现意想不到的情况<br>例如子查询、数据相等判断等</li>
</ul>

	
	
	
	
</div>

				

                <!-- Post Comments -->
                
                    
    <!-- 使用多说评论 -->
    <link rel="stylesheet" href="/css/duoshuo.min.css">
<style>
    #ds-thread #ds-reset .ds-post-button{
        background-color: #0097A7 !important;
    }
    #ds-wrapper #ds-reset .ds-icons-32{
        background-color: #0097A7 !important;
    }
    #ds-reset .ds-highlight {
        color: #0097A7 !important;
    }
</style>
<div id="comments">
    <!-- 多说评论框 start -->
        <div class="ds-thread" 
            data-thread-key="2017/02/25/统一数据模型(Unified LDM)介绍/" 
            data-url="http://instore.top/2017/02/25/统一数据模型(Unified LDM)介绍/"
            data-title="统一数据模型(Unified LDM)介绍"></div>
    <!-- 多说评论框 end -->
</div>



                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/2017/02/25/生来并行，天生超越——MPP架构原理及实现/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/02/05/浅析数据分布机制：DB2-Oracle-GreenPlum-Teradata横向对比/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
					<!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay "></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored  sidebar-fixed-left" role="navigation">
	<div id="sidebar-main">
	    <!-- Sidebar Header -->
		<div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Liang3p's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        liang3p@gmail.com
        <b class="caret"></b>
    </a>
</div>

		<!-- Sidebar Navigation  -->
		<ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
			
                <li>
                    <a href="mailto:liang3p@gmail.com" target="_blank" title="Email Me">
						<i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
             主页
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
<!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
-->

	
    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             归档
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">3</span></a>
        </ul>
    </li>

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
	

    <!-- Article Numebr  -->
    <li>
        <a href="/archives">
             文章总数
             <span class="sidebar-badge">7</span>
        </a>
    </li>
</ul>

		<!-- Sidebar Divider -->
		<div class="sidebar-divider"></div>

		<!-- Sidebar Footer -->
		<!-- 
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持。 :) 
-->

<!-- Theme Material -->
<a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
	<div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		主题 - Material
		<span class="sidebar-badge badge-circle">i</span>
	</div>
</a>

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		sidebar.help
		<span class="mdl-button__ripple-container">
			<span class="mdl-ripple"></span>
		</span>
	</div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

	</div>
    
    <!-- Sidebar Sponsor -->
    


</aside>

				
				
				
					<!-- Footer Top Button -->
					<div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
		<!-- Paradox Footer Left Section -->
		<div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
    <a href="https://twitter.com/liang3p" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
        <span class="visuallyhidden">Twitter</span>
    </button></a>
    
    
    <!-- Facebook -->
    
    <a href="https://www.facebook.com/profile.php?id=100011242741015" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.png);">
        <span class="visuallyhidden">Facebook</span>
    </button></a>
    
    
    <!-- Google + -->
    
    <a href="https://plus.google.com/115291231508178529929" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.png);">
        <span class="visuallyhidden">Google Plus</span>
    </button></a>
    
    
    <!-- Weibo -->
    
    <a href="http://weibo.com/2837545975" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-weibo.png);">
        <span class="visuallyhidden">Weibo</span>
    </button></a>
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    
    <!-- Github -->
    
    
</div>


		<!--Copyright-->
		<div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;instore.top | Learn More, Share More.</div>

		<!-- Paradox Footer Right Section -->

		<!-- 
		I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
		It will not impact the appearance and can give developers a lot of support :)

		很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
		它不会影响美观并可以给开发者很大的支持。 :) 
		-->

		<div class="mdl-mini-footer--right-section">
			<div>
				<div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
				<div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
			</div>
		</div>
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/highlight.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>






    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    <!-- 多说公共 js 代码 start -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"instore"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = 'https://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
             || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共 js 代码 end -->




<!-- Swiftye -->


<!-- Local Search-->

	<script>
	var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        success: function( xmlResponse ) {
            // get the contents from search data
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length <= 0) {
                    return;
                }
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        str += "<li><a href='"+ data_url +"' class='search-result-title' target='_blank'>"+ data_title;
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out characters
                            var start = first_occur - 6;
                            var end = first_occur + 6;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 10;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substr(start, end); 
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<em class=\"search-keyword\">"+keyword+"</em>");
                            })
                            str += "<p class=\"search-result\">" + match_content +"...</p>" +"</a>";
                        }
                    }
                })
                $resultContent.innerHTML = str;
            })
        }
    })
}
</script>

	<script>
        var inputArea = document.querySelector("#search");
        var getSearchFile = function(){
            var path = "search.xml";
            searchFunc(path, 'search', 'local-search-result');
        }

        inputArea.onfocus = function(){ getSearchFile() }
	</script>


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $(".post-toc-wrap").parent(".mdl-menu__container").css("position", "fixed");
    });
</script>

<!-- MathJax Load-->

            </main>
        </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
		
    </body>
		
	
</html>
